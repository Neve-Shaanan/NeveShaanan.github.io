import{a as K,b as gt,c as U,d as ht,e as V,f as ut,g as G,h as ft,i as M,j as wt,k as _,l as bt}from"https://st-p.rmcdn.net/8223b069/dist/c/c-EVFMQEYX.js";import{f as H,t as W,w as mt}from"https://st-p.rmcdn.net/8223b069/dist/c/c-ZD4R6MOL.js";import{a as v,b as N}from"https://st-p.rmcdn.net/8223b069/dist/c/c-4VEZPFO4.js";import{a as u,b as F,k as S}from"https://st-p.rmcdn.net/8223b069/dist/c/c-7HQ2NNGG.js";import{b as y,c as O}from"https://st-p.rmcdn.net/8223b069/dist/c/c-UM6KN5NI.js";import{a as $,d as pt}from"https://st-p.rmcdn.net/8223b069/dist/c/c-EHID626S.js";import{B as R,C as i,D as h,E as w}from"https://st-p.rmcdn.net/8223b069/dist/c/c-TAZ5VF2F.js";import{a as ct}from"https://st-p.rmcdn.net/8223b069/dist/c/c-XVJOBTSH.js";import{b as dt}from"https://st-p.rmcdn.net/8223b069/dist/c/c-FWG4ZALP.js";import{a as A,d as lt}from"https://st-p.rmcdn.net/8223b069/dist/c/c-LP3JJHSV.js";function q({isVisible:t,isDarkBackground:o,type:n,onClick:m}){let p=`lightbox-arrow-${n}`;return h(xt,{"data-testid":p,position:"absolute",top:"50%",marginTop:"-4rm",zIndex:3100,onClick:m,initial:{opacity:0},animate:{opacity:t?1:0,left:n==="left"?t?24:-40:"auto",right:n==="right"?t?24:-40:"auto"},variant:"clean",children:[i(v,{id:p,children:n==="left"?"Previous":"Next"}),n==="left"?o?i(K,{}):i(V,{}):o?i(U,{}):i(G,{})]})}function yt({isVisible:t,isDarkBackground:o,onPrev:n,onNext:m}){return h(R,{children:[i(q,{isVisible:t,isDarkBackground:o,type:"left",onClick:n}),i(q,{isVisible:t,isDarkBackground:o,type:"right",onClick:m})]})}var xt,J,Q=A(()=>{"use strict";O();N();S();gt();ht();ut();ft();w();xt=u(y);J=yt});function X(t){return h(vt,{initial:{opacity:0},animate:{opacity:t.isVisible?1:0},"data-testid":"lightbox-cross",onClick:t.onClick,position:"absolute",right:"2rm",top:"2rm",zIndex:3100,variant:"clean",children:[i(v,{id:"lightbox-cross",children:"Close"}),t.isDarkBackground?i(M,{}):i(_,{})]})}var vt,Y=A(()=>{"use strict";O();N();S();wt();bt();w();vt=u(y)});function kt({mode:t,isVisible:o,slides:n,onClose:m,index:a,onSlideChange:c,originRect:p}){let[Z,j]=(0,s.useState)("prev"),e=(0,s.useMemo)(()=>n[a],[n,a]),[tt,I]=(0,s.useState)(!1),[l,ot]=(0,s.useState)(!1),f=(0,s.useMemo)(()=>n.map((r,d)=>r.gallery?d:null).filter(r=>r!==null),[n]),k=n.length>1&&e.gallery,{isImageLoaded:it,preloadImage:et}=Lt(),C=it(e.imgSrc)||tt&&l&&et(e.imgSrc),D=C?"zoom-out":"wait",[L,nt]=(0,s.useState)({height:window.innerHeight,width:window.innerWidth});function P(){nt({height:window.innerHeight,width:window.innerWidth})}let rt=(0,s.useMemo)(()=>{let{r,g:d,b:g,a:st}=H(e.color);return`rgba(${r}, ${d}, ${g}, ${st})`},[e.color]),at={hidden:{opacity:0},visible:{opacity:1}},z={position:"absolute",inset:0,height:"100%",width:"100%"},E=(0,s.useMemo)(()=>{let{top:r=0,left:d=0,...g}=p;return{...g,top:`${r*100/L.height}%`,left:`${d*100/L.width}%`,opacity:0}},[p,L]);function b(r){if(!k||!c)return;I(!1),j(r);let d=f.indexOf(a),g=r==="next"?d+1:d-1;r==="next"?g<f.length?c(f[g]):c(f[0]):g>=0?c(f[g]):c(f[f.length-1])}function x(){l&&m&&m()}function B(r){switch(r.key){case"Escape":x();break;case"ArrowLeft":b("prev");break;case"ArrowRight":b("next");break;default:break}}(0,s.useEffect)(()=>(window.addEventListener("resize",P),t==="viewer"&&l&&(o?window.addEventListener("keyup",B):window.removeEventListener("keyup",B)),()=>{window.removeEventListener("resize",P),window.removeEventListener("keyup",B)}),[o,e,l]);let T=(0,s.useMemo)(()=>W(e.color),[e]);return h($,{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2999,pointerEvents:l?"all":"none",children:[i(X,{isDarkBackground:!T,isVisible:o&&l,onClick:x}),t==="viewer"&&k&&i(J,{isDarkBackground:!T,isVisible:o&&l,onPrev:()=>b("prev"),onNext:()=>b("next")}),i(u.div,{onClick:x,variants:at,initial:"hidden",animate:o?"visible":"hidden",style:{backgroundColor:rt,position:"absolute",zIndex:0,width:"100%",height:"100%",transition:".3s background-color",cursor:D}}),i(F,{children:o&&i(u.div,{variants:{initial:E,animate:{top:"50%",left:"50%",height:e.height,width:e.width,opacity:1},exit:k?{opacity:0}:E},initial:"initial",animate:"animate",exit:"exit",onClick:x,style:{position:"absolute",zIndex:10,width:"100%",height:"100%",cursor:D},onAnimationComplete:r=>{let d=r==="exit";ot(!d),I(!d)},transition:{mass:1,stiffness:170,damping:26},children:h(u.div,{initial:{opacity:0,left:l?Z==="next"?"100%":"-100%":0},animate:{opacity:1,left:"0%"},style:{position:"absolute",transform:"translate(-50%, -50%)",height:o&&l||!o&&l&&e.gallery?e.height:"100%",width:o&&l||!o&&l&&e.gallery?e.width:"100%"},transition:{mass:1,stiffness:170,damping:26},children:[C&&i("img",{style:{...z,zIndex:20},src:e.imgSrc}),i("img",{"data-testid":"lightbox-image",style:{...z,zIndex:10,filter:"blur(0.4px)"},src:e.previewImgSrc})]},e._id)})})]})}function Lt(){let[t,o]=(0,s.useState)({});function n(a){if(t.hasOwnProperty(a))return t[a];let c=new Image;c.onload=()=>{o({...t,[a]:!0})},c.onerror=()=>{let p={...t};delete p[a],o(p)},c.src=a,o({...t,[a]:!1})}function m(a){return t.hasOwnProperty(a)?t[a]:!1}return{isImageLoaded:m,preloadImage:n}}var s,Qt,Bt=A(()=>{"use strict";s=lt(ct());pt();S();dt();mt();Q();Y();w();Qt=kt});export{Qt as a,Bt as b};
